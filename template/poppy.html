<noscript id="poppy">
	<div id="poppy-<%=self.id%>" class="poppy" data-id="<%=self.id%>">
		<input type="button" class="poppy-close" value="<%=_('Close')%>" />
		<div class="poppy-content"></div>
		<div class="poppy-arrow"></div>
		<div class="poppy-arrow-settings"></div>
		<div class="poppy-arrow-settings-up"></div>
	</div>
</noscript>

<noscript id="disable-menu">
	<h3 class="jsb-centered"><%=_('view_toolbar.disable')%></h3>
	<div id="disable-menu" class="generic-menu">
		<div class="generic-menu-menu">
			<%=UI.Settings.createElementForSetting(Settings.map.disableTime, 'disable-menu-for').html()%>&nbsp;
			<input type="button" id="disable-menu-for-disable" value="<%=_('view_toolbar.disable')%>" />
		</div>
		<div class="horizontal-divider"></div>
		<ul class="generic-menu-options">
			<%
				var settings = ['disablingReloadsAll', 'persistDisabled', 'alwaysUseTimedDisable'];

				for (var i = settings.length; i--;) { %>
					<li><%=UI.Settings.createElementForSetting(Settings.map[settings[i]]).html()%></li><%
				} %>
		</ul>
	</div>
</noscript>

<noscript id="main-menu">
	<h3 class="jsb-centered">JavaScript Blocker <%=Version.display%></h3>
	<div id="main-menu" class="generic-menu">
		<div class="generic-menu-menu">
			<input type="button" id="main-menu-contribute" class="jsb-color-blocked" value="<%=_('main_menu.unlock')%>" />
			<input type="button" id="main-menu-about" value="<%=_('main_menu.about')%>" />
			<%
				var messageHistory = Utilities.messageHistory(),
						messageCount = messageHistory.error.length + messageHistory.debug.length; %>
		</div>
		<div class="horizontal-divider"></div>
		<div id="main-menu-console-info">
			<input type="button" id="main-menu-console" value="<%=_('main_menu.console')%>" />
			<span id="main-menu-console-message-count"><%=_('main_menu.console.message' + (messageCount === 1 ? '' : 's'), [messageCount])%></span> 
		</div>
	</div>
</noscript>

<noscript id="page-menu">
	<h3 class="jsb-centered"><%=_('view_toolbar.page')%></h3>
	<div id="page-menu" class="generic-menu">
		<ul class="generic-menu-options">
			<%
				var settings = ['showResourceURLs', 'showItemDescription', 'showUnblockedScripts', 'showHiddenItems', 'showPageEditorImmediately'];

				for (var i = settings.length; i--;) { %>
					<li><%=UI.Settings.createElementForSetting(Settings.map[settings[i]]).html()%></li><%
				} %>
		</ul>
	</div>
</noscript>

<noscript id="rule-menu">
	<h3 class="jsb-centered"><%=_('view_toolbar.rules')%></h3>
	<div id="rule-menu" class="generic-menu">
		<ul class="generic-menu-options">
			<% if (!globalPage.Rules.list.temporary.rules.isEmpty()) { %>
				<li class="jsb-align-right">
					<input type="button" id="rule-menu-remove-temporary" value="<%=_('rule_menu.remove_temporary')%>" />
					<div class="horizontal-divider"></div>
				</li>
			<% } %>
			<li class="jsb-align-right">
				<input type="button" id="rule-menu-import-rules-from-four" value="Import Rules From JSB 4" />
				<div class="horizontal-divider"></div>
			</li>
			<li class="jsb-align-right">
				<input type="button" id="rule-menu-import-rules-delete" value="Delete All Rules" />
			</li>
		</ul>
	</div>
</noscript>

<noscript id="setting-menu">
	<h3 class="jsb-centered"><%=_('view_toolbar.setting')%></h3>
	<div class="generic-menu">
		<ul class="generic-menu-options">
			<li>
				<h3>Backup</h3>
			</li>
			<li>
				<ul class="generic-menu-options">
					<li>
						<label>Export file:</label>&nbsp;
						<input id="setting-menu-backup-export" type="button" value="Export" />
					</li>
					<li>
						<span class="jsb-readable">A file called <b>Unknown</b> will be saved to your downloads folder. You can rename it to whatever you wish.</span>
						<div class="horizontal-divider"></div>
					<li>
						<label>Import file:</label>&nbsp;
						<input id="setting-menu-backup-import" type="file" value="Import" />
					</li>
					<li>
						<span class="jsb-readable">You'll have to drag and drop the backup file into the space above. Safari doesn't allow popovers to open a choose file dialog.</span>
					</li>
				</ul>
				<div class="horizontal-divider"></div>
			</li>
			<li class="jsb-align-right">
				<input id="setting-menu-restore-defaults" type="button" value="Restore Defaults" />
			</li>
		</ul>
	</div>
</noscript>

<noscript id="console">
	<div id="console-container">
		<h3 class="jsb-centered"><%=_('main_menu.console')%></h3>
		<input type="button" id="console-clear" value="<%=_('console.clear')%>" />
		<input type="button" id="console-report" value="<%=_('console.report')%>" />
		<ul class="console">
			<li><h4 class="jsb-centered"><%=_('console.error_messages')%></h4></li>
		<%
			var messageHistory = Utilities.messageHistory();

			if (!messageHistory.error.length) { %>
				<li class="jsb-centered"><span class="console-error-message jsb-smaller"><%=_('console.no_messages')%></span></li><%
			} else {
				for (var i = 0; i < messageHistory.error.length; i++) {
					%><li>
							<span class="console-error-message"><%=messageHistory.error[i].message.join(' ')%></span>
							<% if (i !== messageHistory.error.length - 1) %>
								<div class="horizontal-divider"></div>
						</li><%
					if (messageHistory.error[i].stack.length) { %>
						<li>
							<span class="console-error-stack">Stack: <%=messageHistory.error[i].stack%></span>
						</li><%
					}
				}
			}
		%>
		</ul>
		<ul class="console">
			<li><h4 class="jsb-centered"><%=_('console.debug_messages')%></h4></li>
		<%
			if (!messageHistory.debug.length) { %>
				<li class="jsb-centered"><span class="console-debug-message jsb-smaller"><%=_('console.no_messages')%></span></li><%
			} else {
				for (var i = 0; i < messageHistory.debug.length; i++) {
					%><li>
							<span class="console-debug-message"><%=messageHistory.debug[i]%></span>
							<% if (i !== messageHistory.debug.length - 1) %>
								<div class="horizontal-divider"></div>
						</li><%
				}
			}
		%>
		</ul>
	</div>
</noscript>

<noscript id="select-custom-options">
	<h3 class="jsb-centered"><%=_('select.options')%></h3>
	<ul class="select-custom-options"><%
		self.options.each(function () { %>
			<li data-value="<%=this.value._entityQuotes()%>"><%=this.innerText._escapeHTML()%></li><%
		}); %>
	</ul>
</noscript>

<noscript id="select-custom-option">
	<h3 class="jsb-centered"><%=_('select.add_custom_option')%></h3>
	<input type="text" class="select-custom-option trigger-on-enter" value="<%=self.default ? self.default._entityQuotes() : ''%>" />
	<div class="jsb-align-right">
		<input type="button" class="select-custom-option-cancel" value="Cancel" />
		<input type="button" class="select-custom-option-save on-enter" value="Use Option" />
	</div>
</noscript>

<noscript id="change-log">
	<h3 class="jsb-centered"><%=_('change_log', [self.version])%></h3>
	<div class="jsb-info"><%=self.changeLog.html()%></div>
</div>


<noscript id="update-150106">
	<h2 class="jsb-centered">Alpha 3 Changes</h2>
	<div class="jsb-readable">
		<ol class="generic-menu-options">
			<li>This update notifier was implemented.</li>
			<li>Mark donationVerified as true to unlock all settings. This will be changed upon general public release.</li>
		</ol>
	</div>
	<p class="jsb-info jsb-align-right">
		<input type="button" value="OK" />
	</p>
</noscript>

<noscript id="update-150107">
	<h2 class="jsb-centered">Alpha 4 Changes</h2>
	<p class="jsb-info">Expect a lot of updates!</p>
	<div class="jsb-readable">
		<ol class="generic-menu-options">
			<li>Improved look and feel of settings page.</li>
			<li>The settings <b>Ignore whitelist rules</b> and <b>Ignore blacklist rules</b> are now respected.</li>
		</ol>
	</div>
	<p class="jsb-info jsb-align-right">
		<input type="button" value="OK" />
	</p>
</noscript>
