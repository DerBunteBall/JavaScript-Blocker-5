@empty:;
@yosemiteBlue: rgb(23, 126, 251);
@baseColor: rgb(23, 126, 251);
@allowColor: #008913;
@blockColor: #920101;
@focusShadow: rgb(171, 221, 254);
@background: rgb(239, 239, 244);
@easeOutQuad: cubic-bezier(0.250, 0.460, 0.450, 0.940);
@darkMode: false;
@speedMultiplier: 1;
@darknessLevel: 0%;

.shared-before(@important) {
	@-webkit-keyframes shake {
		0% { -webkit-transform: translateX(0); }
		14% { -webkit-transform: translateX(-13px); }
		28% { -webkit-transform: translateX(13px); }
		43% { -webkit-transform: translateX(-9px); }
		57% { -webkit-transform: translateX(9px); }
		71% { -webkit-transform: translateX(-7px); }
		86% { -webkit-transform: translateX(7px); }
		100% { -webkit-transform: translateX(0); }
	}

	@-webkit-keyframes unshake {
		0% { -webkit-transform: translateX(0); }
		14% { -webkit-transform: translateX(13px); }
		28% { -webkit-transform: translateX(-13px); }
		43% { -webkit-transform: translateX(9px); }
		57% { -webkit-transform: translateX(-9px); }
		71% { -webkit-transform: translateX(7px); }
		86% { -webkit-transform: translateX(-7px); }
		100% { -webkit-transform: translateX(0); }
	}

	.- () when (@darkMode) {
		@blockColor: #c42c28;
	}

	.-();

	.- () when (@darkMode) {
		@focusShadow: rgb(41, 91, 124);
	}

	.-();

	.color-allow() {
		&.jsb-color-allowed {
			color: @allowColor @important;
		}
	}

	.color-block() {
		&.jsb-color-blocked {
			color: @blockColor @important;
		}
	}

	.darkness-color () when (@darkMode) {
		color: #cacaca @important;
		text-shadow: 0 1px 0 #000 @important;
	}

	.jsb-element,
	.jsb-injected-element {
		::-webkit-scrollbar {
			width: 6px @important;
			height: 6px @important;

			&-corner {
				background: transparent @important;
			}

			&-track {
				border-radius: 5px @important;
				background: rgba(0, 0, 0, 0.07) @important;

				& when (@darkMode) {
					background: rgba(255, 255, 255, 0.06) @important;
				}
			}

			&-thumb {
				border-radius: 5px @important;
				background: rgba(0, 0, 0, 0.3) @important;

				& when (@darkMode) {
					background: rgba(255, 255, 255, 0.2) @important;
				}
				
				&:hover {
					background: rgba(0, 0, 0, 0.5) @important;

					& when (@darkMode) {
						background: rgba(255, 255, 255, 0.4) @important;
					}
				}
			}
		}

		&::selection,
		*::selection {
			background: desaturate(@yosemiteBlue, 20%) @important;
			color: #fff @important;
			text-shadow: none @important;
		}

		& when (@darkMode) {
			&::selection,
			*::selection {
				color: #eee @important;
			}
		}

		font-size: 9pt @important;

		* {
			margin: 0 @important;
			color: #222 @important;
			font-family: 'Helvetica Neue', Helvetica, sans-serif @important;
			font-size: 1em @important;
			height: auto @important;
			min-height: 0 @important;
			width: auto @important;
			min-width: 0 @important;
			box-shadow: none @important;
			text-shadow: none @important;
			padding: 0 @important;
			-webkit-font-smoothing: subpixel-antialiased @important;
			line-height: 1.2 @important;
			text-transform: none @important;
			clear: none @important;
			text-rendering: optimizeLegibility @important;
			text-align: left @important;
			white-space: normal @important;
			border: none @important;
			background: none @important;
			-webkit-transition-property: none @important;
			visibility: visible @important;
			opacity: 1;
			float: none @important;
			text-indent: 0 @important;
			letter-spacing: normal @important;

			.darkness-color();

			&:after {
				content: none @important;
			}

			&.shake {
				-webkit-animation: shake unit(0.4 * @speedMultiplier, s) linear 0 1 @important;
			}

			&.unshake {
				-webkit-animation: unshake unit(0.4 * @speedMultiplier, s) linear 0 1 @important;
			}

			.color-allow;
			.color-block;
		}

		&.jsb-large-font {
			font-size: 11pt @important;
		}

		div {
			display: block @important;
		}

		input,
		select,
		button,
		textarea {
			background: darken(#fff, @darknessLevel - 5%) @important;
			border: none @important;
			border-radius: 4px @important;
			color: darken(#333, @darknessLevel) @important;
			text-shadow: 0 1px 0 rgba(255,255,255,0.5) @important;
			border: 1px solid darken(rgb(200, 200, 200), @darknessLevel) @important;
			border-bottom-color: darken(rgb(168, 168, 168), @darknessLevel) @important;
			box-shadow: 0 1px 0 rgba(0, 0, 0, 0.04) @important;
			width: auto @important;
			height: auto @important;
			cursor: default @important;
			padding: 3px 8px @important;
			border-radius: 5px @important;
			line-height: 1 @important;
			text-shadow: none @important;
			font-weight: normal @important;
			text-align: center @important;

			.darkness-color();

			.color-allow;
			.color-block;

			&.blend-in {
				background: darken(rgba(255, 255, 255, 0.5), @darknessLevel);
				border-color: darken(rgba(200, 200, 200, 0.5), @darknessLevel);
				box-shadow: 0 1px 0 rgba(0, 0, 0, 0.02) @important;
			}

			&[disabled] {
				&,
				+ label {
					opacity: 0.5 @important;
					pointer-events: none @important;
				}
			}

			&:not([type="radio"]):focus {
				outline: none @important;
				border-color: darken(@focusShadow, 5%);
				box-shadow: 0 1px 0 @focusShadow,
					0 -1px 0 @focusShadow,
					1px 0 0 @focusShadow,
					-1px 0 0 @focusShadow,
					inset 0 1px 0 @focusShadow,
					inset 0 -1px 0 @focusShadow,
					inset 1px 0 0 @focusShadow,
					inset -1px 0 0 @focusShadow @important;
			}


			&[type="text"],
			&[type="password"],
			&[type="search"] {
				padding: 2px @important;
			}
		}

		textarea {
			position: relative @important;
			padding: 2px 3px @important;

			&.render-as-input {
				height: 15px @important;
				overflow-x: scroll @important;
				overflow-y: hidden @important;
				vertical-align: bottom @important;
				resize: none @important;
				word-wrap: normal @important;
				white-space: pre @important;

				.jsb-large-font& {
					height: 17px @important;
				}

				&::-webkit-scrollbar {
					height: 3px @important;
				}
			}
		}

		input[type="button"],
		button {
			.jsb-large-font& {
				padding: 2px 8px 4px @important;
			}

			&:active {
				background: darken(#f5f5f5, @darknessLevel) @important;
				border-color: darken(rgb(185, 185, 185), @darknessLevel) @important;
				-webkit-animation: none @important;
				text-shadow: 0 0 0 rgba(0, 0, 0, 0.3) @important;
			}

			&.on-enter {
				color: #fff @important;
				background: -webkit-linear-gradient(top, lighten(@baseColor, 15%), lighten(@baseColor, 2%)) @important;
				border-top-color: lighten(@baseColor, 7%) @important;
				border-left-color: @baseColor @important;
				border-right-color: @baseColor @important;
				border-bottom-color: darken(@baseColor, 8%) @important;

				&:active {
					background: -webkit-linear-gradient(top, lighten(@baseColor, 7%), darken(@baseColor, 6%)) @important;
				}
			}

			&.double-click {
				&.one-more-time {
					background: -webkit-linear-gradient(top, darken(red, 5%), darken(red, 10%)) @important;
					border-color: darken(red, 13%) @important;
					color: #fff @important;

					&:active {
						background: -webkit-linear-gradient(top, darken(red, 13%), darken(red, 18%)) @important;
					}
				}
			}
		}

		input[type="text"],
		input[type="password"],
		input[type="search"],
		input[type="number"],
		textarea {
			border-radius: 2px @important;
			color: lighten(#111, @darknessLevel) @important;
			cursor: text @important;

			.color-allow;
			.color-block;

			&::-webkit-input-placeholder {
				padding: 1px 0 @important;
			}

			&,
			select {
				text-align: left @important;
			}
		}

		textarea {
			&::-webkit-input-placeholder {
				padding: 0 @important;
			}
		}

		input[type="search"] {
			-webkit-appearance: none @important;
			border-radius: 12px @important;
			border-bottom-color: darken(rgb(200, 200, 200), @darknessLevel);

			&::-webkit-search-cancel-button {
				-webkit-appearance: none @important;
				margin-left: 3px @important;
				cursor: default @important;

				&:after {
					display: block @important;
					height: 12px @important;
					width: 12px @important;
					margin-right: 1px @important;
					content: 'ùòÖ' @important;
					text-align: center @important;
					font-size: 10pt @important;
					color: #fafafa @important;
					background: rgba(0, 0, 0, 0.4) @important;
					border-radius: 12px @important;
					line-height: 0.7 @important;
					text-shadow: 0 0 2px rgba(0, 0, 0, 0.3) @important;
				}
			}
		}

		input[type="file"] {
			background: transparent @important;
			border-color: darken(rgb(235, 235, 235), @darknessLevel) @important;
			box-shadow: none @important;
			padding-left: 3px @important;
			width: 200px @important;
		}

		input[type="checkbox"],
		input[type="radio"] {
			display: inline-block @important;
			position: relative @important;
			-webkit-appearance: none @important;
			height: 14px @important;
			width: 14px @important;
			background: darken(#fff, @darknessLevel - 5%) @important;
			padding: 1px 4px 3px 1px @important;
			border-radius: 3px @important;
			margin-bottom: -2px @important;
			border-bottom-color: darken(rgb(190, 190, 190), @darknessLevel) @important;
			box-shadow: inset 0 0 2px rgba(0, 0, 0, 0) @important;
			-webkit-transition: background unit(0.15 * @speedMultiplier, s) ease-out, border-color unit(0.15 * @speedMultiplier, s) ease-out @important;
			overflow: hidden @important;
			font-family: "Menlo-Regular" @important;

			&:active {
				background: darken(#f3f3f3, @darknessLevel) @important;

				& when (@darkMode) {
					background: #313131 @important;
				}
			}

			&:after {
				display: inline-block @important;
				color: rgba(255, 255, 255, 0) @important;
				font-weight: bold @important;
				content: '‚∏Ä' @important;
				-webkit-transform: translate(5px, -11px) scaleX(1.1) scaleY(1.5) rotate(220deg) @important;
				-webkit-font-smoothing: antialiased @important;
				-webkit-transition: color unit(0.15 * @speedMultiplier, s) ease-out, text-shadow unit(0.15 * @speedMultiplier, s) ease-out, -webkit-transform unit(0.15 * @speedMultiplier, s) ease-out @important;
				text-shadow: -1px -1px 0 rgba(0, 0, 0, 0), 0 0 0 rgba(255, 255, 255, 0) @important;
				font-size: 20px @important;

				.lion& {
					-webkit-transform: translate(4px, -8px) scaleX(1.1) scaleY(1.5) rotate(220deg) @important;
					font-size: 15px @important;
				}
			}

			&:checked {
				background-color: lighten(@baseColor, 7%) @important;
				border-color: lighten(@baseColor, 1%) @important;

				&:after {
					color: rgba(255, 255, 255, 1) @important;
					text-shadow: -1px -1px 0 rgba(0, 0, 0, 0.18), 0 0 0 rgba(255, 255, 255, 0.6) @important;
				}

				&:active:after {
					opacity: 0.9 @important;
				}
			}

			&:focus {
				border-color: darken(@focusShadow, 5%) @important;
			}

			+ label {
				margin-bottom: 3px @important;
				margin-right: 2px @important;
			}
		}

		input[type="radio"] {
			border-radius: 20px @important;

			&:after {
				content: '‚Ä¢';
				-webkit-transform: translate(-1px, -5px) scale(2) @important;
				-webkit-transition: text-shadow unit(0.15 * @speedMultiplier, s) ease-out @important;

				.lion& {
					-webkit-transform: translate(1px, -3px) scale(2) @important;
				}
			}

			&:checked:after {
				-webkit-transform: translate(1px, -1px) scale(1.3) @important;
				text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 2px @baseColor @important;
				font-size: 13px @important;

				.jsb-large-font& {
					-webkit-transform: translate(1px, -2px) scale(1.3) @important;

					.lion& {
						-webkit-transform: translate(1px, -3px) scale(1.3) @important;
					}
				}
			}
		}

		select {
			.color-allow;
			.color-block;

			color: #3a3a3a @important;
			-webkit-appearance: none @important;
			border-bottom-color: darken(rgb(190, 190, 190), @darknessLevel) @important;
			z-index: 1 @important;
			padding-right: 21px @important;
			white-space: pre @important;
			overflow: hidden @important;
			margin-top: 1px @important;

			.darkness-color();

			&:after {
				display: inline-block @important;
				content: ' ' @important;
				margin-right: 20px @important; 
			}

			+ label {
				z-index: 2 @important;
				font-size: 9pt @important;
				margin-left: -16px @important;
				margin-right: 0 @important;
				pointer-events: none @important;
				color: #fff @important;
				font-weight: bold @important;
				background: lighten(@baseColor, 7%) @important;
				height: 18px @important;
				position: relative @important;
				top: -1px @important;
				border-top: 1px solid lighten(@baseColor, 5%) @important;
				border-right: 1px solid @baseColor @important;
				border-bottom: 1px solid darken(@baseColor, 4%) @important;
				border-top-right-radius: 4px @important;
				border-bottom-right-radius: 4px @important;
				-webkit-font-smoothing: antialiased @important;
				text-shadow: 0 0 0 rgba(255, 255, 255, 0.7) @important;

				.yosemite& {
					top: -2px @important;
				}

				.jsb-large-font& {
					height: 21px @important;
					top: -4px @important;

					.yosemite& {
						top: -5px @important;
					}
				}

				& when (@darkMode) {
					border-top-color: darken(@baseColor, 20%) @important;
					border-right-color: darken(@baseColor, 25%) @important;
					border-bottom-color: darken(@baseColor, 29%) @important;
				}

				&,
				&:before,
				&:after {
					width: 15px @important;
					display: inline-block @important;
					text-align: right @important;
				}

				&:before {
					content: '‚åÉ' @important;
					-webkit-transform: translate(-1px, 0) scale(0.85) @important;
					text-shadow: 0 1px 0 rgba(0, 0, 0, 0.22), 0 0 0 rgba(255, 255, 255, 0.7) @important;

					.jsb-large-font& {
						-webkit-transform: translate(-1px, 1px) scale(0.85) @important;
					}
				}

				&:after {
					content: '‚åÉ' @important;
					margin-left: -15px @important;
					-webkit-transform: translate(2px, 3px) scale(0.85) rotate(180deg) @important;
					text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.22), 0 0 0 rgba(255, 255, 255, 0.7) @important;

					.lion& {
						-webkit-transform: translate(2px, 4px) scale(0.85) rotate(180deg) @important;
					}

					.jsb-large-font& {
						-webkit-transform: translate(2px, 5px) scale(0.85) rotate(180deg) @important;

						.lion& {
							-webkit-transform: translate(2px, 6px) scale(0.85) rotate(180deg) @important;							
						}
					}					
				}
			}

			&:active {
				background: darken(#f0f0f0, @darknessLevel);
				
				+ label {
					background: @baseColor;
				}
			}

			&.select-cycle {
				+ label {
					&:before {
						content: '‚àû' @important;

						-webkit-transform: translate(3px, 3px) scale(1) rotate(180deg) @important;

						.jsb-large-font& {
							-webkit-transform: translate(3px, 4px) scale(1) rotate(180deg) @important;
						}
					}

					&:after {
						content: '' @important;
					}
				}

				&.select-custom-ready + label:before {
					-webkit-transform: translate(3px, 4px) scale(1) rotate(180deg) @important;

					.jsb-large-font& {
						-webkit-transform: translate(3px, 5px) scale(1) rotate(180deg) @important;
					}
				}
			}

			&:not(.css-is-dumb).select-single {
				background: none @important;
				border-color: transparent @important;
				box-shadow: none @important;
				padding-left: 2px @important;
				padding-right: 0 @important;

				+ label {
					visibility: hidden @important;
				}
			}
		}

		select:not(.select-single):not(.select-custom-ready):focus + label,
		.select-custom-input:focus + .select-wrapper > select + label {
			border-top-right-radius: 5px @important;
			border-bottom-right-radius: 5px @important;
			box-shadow: 0 1px 2px @focusShadow,
				0 1px 2px @focusShadow,
				0 1px 2px @focusShadow,
				0 -1px 2px @focusShadow,
				0 -1px 2px @focusShadow,
				0 -1px 2px @focusShadow,
				1px 0 0 darken(@focusShadow, 10%),
				2px 0 1px @focusShadow @important;
		}

		.select-custom-wrapper {
			display: -webkit-flex @important;
			-webkit-align-items: flex-start @important;

			.select-custom-input {
				-webkit-flex: 1 1 auto @important;
				position: relative @important;

				+ .select-wrapper {
					-webkit-flex: 0 0 15px @important;
					-webkit-align-self: flex-start @important;
					display: inline-block @important;
					margin-bottom: -2px @important;

					select {
						padding-left: 0 @important;
						padding-right: 0 @important;
						width: 15px @important;
						opacity: 0 @important;

						&:focus {
							&,
							& + label {
								box-shadow: none @important;
							}
						}

						&:not(.select-cycle) {
							+ label {
								&:before {
									content: '' @important;
								}

								&:after {
									-webkit-transform: translate(2px, 1px) scale(0.85) rotate(180deg) @important;

									.lion& {
										-webkit-transform: translate(2px, 2px) scale(0.85) rotate(180deg) @important;
									}

									.jsb-large-font& {
										-webkit-transform: translate(2px, 2px) scale(0.85) rotate(180deg) @important;

										.lion& {
											-webkit-transform: translate(2px, 3px) scale(0.85) rotate(180deg) @important;											
										}
									}
								}
							}
						}
					}
				}

				&:not(input) + .select-wrapper select {
					position: relative @important;
					top: 0 @important;
					padding-top: 4px @important;
					padding-bottom: 4px @important;

					.jsb-large-font& {
						top: 1px @important;
						padding-bottom: 3px @important;
					}

					+ label {
						top: -3px @important;
						height: 19px @important;


						.yosemite& {
							top: -4px @important;
						}

						.jsb-large-font& {
							top: -6px @important;
							height: 21px @important;

							.yosemite& {
								top: -7px @important;
							}
						}
					}
				}
			}
		}

		.select-custom-options {
			min-width: 100px @important;

			li {
				white-space: nowrap @important;
				border-bottom: 1px solid rgba(0, 0, 0, 0.08) @important;
				cursor: pointer @important;
				padding: 4px 0 @important;

				& when (@darkMode) {
					border-bottom-color: rgba(0, 0, 0, 0.45) @important;
				}

				&:last-child {
					border-bottom: none @important;
				}
			}
		}

		.select-custom-option {
			width: 200px @important;

			+ div {
				margin-top: 7px @important;
			}
		}

		.horizontal-divider {
			height: 1px @important;
			background: rgba(0, 0, 0, 0.08) @important;
			margin: 7px 0 @important;

			&-short {
				margin: 5px 0 @important;
				background: rgba(0, 0, 0, 0.06) @important;
			}

			& when (@darkMode) {
				background: rgba(0, 0, 0, 0.45) @important;
			}

			&-transparent {
				background-color: transparent @important;
			}
		}

		.vertical-divider {
			display: inline-block @important;
			width: 1px @important;
			height: 100% @important;
			background: rgba(0, 0, 0, 0.08) @important;
			margin: 0 4px @important;
		}

		.generic-container {
			margin: 7px 0 @important;
		}

		.more-info {
			display: inline-block @important;
			height: 19px @important;
			width: 19px @important;
			border: 1px solid darken(rgb(201, 201, 201), @darknessLevel) @important;
			border-bottom-color: darken(rgb(173, 173, 173), @darknessLevel) @important;
			color: @baseColor @important;
			text-shadow: 0 0 0 lighten(@baseColor, 15%);
			border-radius: 20px @important;
			text-align: center @important;
			line-height: 20px @important;
			background: darken(#fff, @darknessLevel - 5%) @important;
			cursor: default @important;
			-webkit-user-select: none @important;
			font-family: Helvetica @important;
			font-weight: 500 @important;
			box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05) @important;
			font-size: 1.2em @important;

			& when (@darkMode) {
				color: lighten(@baseColor, 12%) @important;
			}

			&:active {
				background: darken(#f0f0f0, @darknessLevel) @important;
			}

			&:before {
				content: '?' @important;
			}
		}
	}
}
