@import "../shared-before.less";

.shared-before(@empty);

@toolbarBaseColor: #dd4c0d;
@toolbarBaseColor: darken(@baseColor, 11%);
@toolbarBaseColor: #0073CF;

.jsb-element {
	& {
		background: #fff;

		&,
		body {
			height: 100%;
			overflow: hidden;
			box-sizing: border-box;
		}
	}

	#modal-overlay {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 600;
		-webkit-user-select: none;
	}

	#container {
		height: 100%;

		#too-old {
			display: none;
			position: fixed;
			padding-top: 80px;
			top: 0;
			left: 0;
			background: #111;
			width: 100%;
			height: 100%;
			z-index: 214159;

			.jsb-info {
				color: #eee;
			
				&,
				& * {
					font-size: 15pt;
				}
			}
		}

		#view-container {
			height: 100%;
			display: -webkit-flex;
			-webkit-flex-direction: column;
			-webkit-transform: translateZ(0px);
			-webkit-filter: blur(0px) contrast(100%) brightness(100%);
			padding: 0 2px;

			.transition() {
				-webkit-transition: background 0.15s ease-out, width 0.25s ease-out, padding 0.25s ease-out;
			}

			&.modal-blur {
				-webkit-filter: blur(12px) contrast(109%) brightness(105%);
			}

			#view-toolbar {
				position: relative;
				margin: 0;
				padding-top: 2px;
				z-index: 500;
				-webkit-flex: 0 0 24px;
				border-bottom: 1px solid rgba(0, 0, 0, 0.12);
				background: #fff;

				.yosemite& {
					padding-top: 4px;
				}

				&,
				& * {
					-webkit-user-select: none;
				}

				#full-toggle,
				#open-menu {
					position: absolute;
					top: 2px;
					padding: 1px 5px 0;
					margin: 0 2px;
					color: @toolbarBaseColor;
					cursor: default;
					line-height: 19px;
					border-radius: 4px;

					.yosemite& {
						top: 4px;
					}
					
					.transition;

					&:active {
						color: darken(@toolbarBaseColor, 10%);
					}

					&.is-disabled,
					&.unread-error {
						color: #fff;
					}

					&.is-disabled {
						background: lighten(@toolbarBaseColor, 4%);

						&:active {
							background: @toolbarBaseColor;
						}
					}

					&.unread-error {
						background: darken(red, 10%);

						&:active {
							background: darken(red, 15%);
						}
					}
				}

				#open-menu {
					right: 0;
				}
			}

			.view-switcher-container {
				position: absolute;
				left: 50%;

				&,
				& * {
					-webkit-user-select: none;
				}

				.view-switcher {
					position: relative;
					left: -50%;
					white-space: nowrap;
					height: 18px;
					list-style: none;
					border-radius: 4px;

					li {
						border: 1px solid rgb(210, 210, 210);
						border-bottom-color: rgb(178, 178, 178);
						display: inline-block;
						margin-left: -1px;
						list-style-type: none;
						text-align: center;
						height: 100%;
						cursor: default;
						background: #fff;

						&:not(:first-child) {
							border-left: none;
						}

						&:first-child {
							border-top-left-radius: 4px;
							border-bottom-left-radius: 4px;
							border-right-color: transparent;

							&.active-view {
								border-left-color: lighten(@baseColor, 10%);
							}

							.view-switcher-item-container {
								border-left-color: transparent;
							}
						}

						&:last-child {
							border-top-right-radius: 4px;
							border-bottom-right-radius: 4px;

							&.active-view {
								border-right-color: lighten(@baseColor, 10%);
							}
						}

						&:active {
							background: #f0f0f0;
						}

						&.active-view {
							.view-switcher-item-container {
								border-left-color: transparent;
							}

							+ li,
							~ li[data-view="#rule-view"] {	
								.view-switcher-item-container {
									border-left-color: #fff;
								}

								&:active .view-switcher-item-container {
									border-left-color: #f0f0f0;
								}
							}

							background: -webkit-linear-gradient(top, lighten(@baseColor, 19%), @baseColor);
							border-top-color: lighten(@baseColor, 10%);
							border-bottom-color: darken(@baseColor, 14%);

							&:active {
								background: -webkit-linear-gradient(top, lighten(@baseColor, 11%), darken(@baseColor, 8%));
							}

							&,
							.view-switcher-item-container {
								color: #fff;
							}
						}

						&.view-switcher-hidden:not(.active-view) .view-switcher-item-container {
							width: 0;
							min-width: 0;
							padding: 0;
							margin: 0;
							overflow: hidden;
							border-right-width: 0;
							border-left-width: 0;
						}

						.view-switcher-item-container {
							display: block;
							position: relative;
							line-height: 18px;
							color: #333;
							text-align: center;
							border-left: 1px solid rgb(225, 225, 225);
							padding: 0 5px;
							width: 63px;
							white-space: nowrap;

							.transition;

							.jsb-large-font& {
								line-height: 17px;
								width: 77px;
							}

							.transition;

							.view-switcher-item-notification {
								display: none;
								position: absolute;
								bottom: 5px;
								left: 71%;
								height: 8px;
								min-width: 7px;
								padding: 3px 4px;
								border-radius: 10px;
								background: red;
								text-align: center;
								line-height: 6px;
								color: #fff;
								border: 1px solid rgba(0, 0, 0, 0.3);
								font-size: 85%;
								text-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);
								box-shadow: 0 1px 0 rgba(0, 0, 0, 0.25);
								z-index: 2;

								.jsb-large-font& {
									bottom: 4px;
									line-height: 8px;
								}
							}
						}
					}
				}
			}

			.ui-view {
				background: #fff;

				&.active-view {
					display: block;
				}

				.floated-header {
					position: absolute;
					z-index: 5;
				}
			}

			.ui-view,
			.ui-view:not(.active-view) .ui-view {
				display: none;
			}


			#main-views {
				-webkit-flex: 1 1 auto;
				overflow-y: scroll;
				overflow-x: hidden;
				padding: 2px 0;
				margin-top: 1px;

				.yosemite& {
					margin-bottom: 2px;
				}

				&::-webkit-scrollbar,
				#setting-views-container::-webkit-scrollbar {
					width: 9px;
					height: 9px;
				}

				.snapshot-info {
					display: none;
				}

				@import "view.page.less";
				@import "view.resource.less";
				@import "view.setting.less";
				@import "view.rule.less";
			}
		}
	}
}

@import "../shared-after.less";

.shared-after(@empty);
