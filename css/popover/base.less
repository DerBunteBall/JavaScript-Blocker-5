@import "../shared-before.less";

.shared-before(@empty);

.jsb-element {
	& {
		background: #fff;

		&,
		body {
			height: 100%;
			overflow: hidden;
			box-sizing: border-box;
		}
	}

	.popover-resize {
		position: fixed;

		&-bottom {
			width: 100%;
			height: 4px;
			bottom: 0;
			left: 0;
			cursor: ns-resize;
		}

		&-left,
		&-right {
			top: 0;
			width: 4px;
			height: 100%;
			cursor: ew-resize;
		}

		&-left {
			left: 0;
		}

		&-right {
			right: 0;
		}
	}

	#modal-overlay {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		z-index: 600;
		-webkit-user-select: none;
		background: rgba(0, 0, 0, 0.05);
	}

	#container {
		height: 100%;

		#too-old {
			display: none;
			position: fixed;
			padding-top: 80px;
			top: 0;
			left: 0;
			background: #111;
			width: 100%;
			height: 100%;
			z-index: 214159;

			.jsb-info {
				color: #eee;
			
				&,
				& * {
					font-size: 15pt;
				}
			}
		}

		#change-log {
			&,
			* {
				line-height: 1.5;
			}
		}

		#view-container {
			height: 100%;
			display: -webkit-flex;
			-webkit-flex-direction: column;
			-webkit-transform: translateZ(0px);
			-webkit-filter: blur(0px) contrast(100%) brightness(100%);

			.yosemite& {
				padding: 0 2px;
			}

			.transition() {
				-webkit-transition: background 0.15s ease-out, width 0.25s ease-out, padding 0.25s ease-out;
			}

			&.modal-blur {
				-webkit-filter: blur(12px) contrast(109%) brightness(105%);
			}

			#view-toolbar {
				position: relative;
				margin: 0;
				padding-top: 2px;
				z-index: 500;
				-webkit-flex: 0 0 24px;
				border-bottom: 1px solid rgba(0, 0, 0, 0.1);
				background: rgb(246, 245, 246);

				.yosemite& {
					padding-top: 4px;
				}

				&,
				& * {
					-webkit-user-select: none;
				}

				#full-toggle,
				#open-menu {
					position: absolute;
					top: 2px;
					padding: 1px 5px 0;
					margin: 0 2px;
					color: #333;
					cursor: default;
					line-height: 19px;
					border-radius: 4px;

					&[data-poppy] {
						.poppy-menu-target:after {
							text-shadow: 0 0 0 rgba(0, 0, 0, 0.3);
						}
					}

					.yosemite& {
						top: 4px;
					}
					
					.transition;

					&:active {
						&,
						* {
							color: #000;
						}
					}

					&.is-disabled,
					&.unread-error {
						&,
						* {
							color: #fff;
						}

						box-shadow: 0 1px 0 #cacaca;
					}

					&.is-disabled {
						background: darken(@baseColor, 13%);

						&:active {
							background: darken(@baseColor, 22%);
						}
					}

					&.unread-error {
						background: darken(red, 10%);

						&:active {
							background: darken(red, 15%);
						}
					}
				}

				#open-menu {
					right: 0;
				}
			}

			.view-switcher-container {
				position: absolute;
				left: 50%;
				border-radius: 5px;

				&,
				& * {
					-webkit-user-select: none;
				}

				.view-switcher {
					position: relative;
					left: -50%;
					white-space: nowrap;
					height: 20px;
					list-style: none;
					border-radius: 4px;
					overflow-y: visible;
					overflow: hidden;
					box-shadow: 0 1px 0 #cacaca;

					.jsb-large-font& {
						font-size: 10pt;
					}

					li {
						border-top: 1px solid #fff;
						border-left: 1px solid rgb(225, 225, 225);
						display: inline-block;
						list-style-type: none;
						text-align: center;
						height: 19px;
						cursor: default;
						background: -webkit-linear-gradient(top, #fff, #fff);
						width: 74px;

						.jsb-large-font& {
							width: 72px;
						}

						.transition;

						&:first-child {
							&,
							&.active-view {
								border-left-color: transparent;
							}
						}

						&.active-view {
							&,
							+ li,
							+ li.view-switcher-hidden + li:not(.view-switcher-hidden),
							+ li.view-switcher-hidden + li.view-switcher-hidden + li:not(.view-switcher-hidden),
							+ li.view-switcher-hidden + li.view-switcher-hidden + li.view-switcher-hidden + li:not(.view-switcher-hidden) {
								border-left-color: darken(@baseColor, 24%);
							}

							background: -webkit-linear-gradient(top, rgb(109, 108, 109), rgb(104, 103, 104));
							background: -webkit-linear-gradient(top, darken(@baseColor, 13%), darken(@baseColor, 15%));
							border-top-color: rgb(109, 108, 109);
							border-top-color: darken(@baseColor, 13%);

							&,
							.view-switcher-item-container .view-switcher-item-name {
								color: #fff;
							}
						}

						&:active:not(.css-is-dumb) {
							background: -webkit-linear-gradient(top, #f0f0f0, #f0f0f0);
							border-top-color: #fdfdfd;

							&.active-view {
								background: -webkit-linear-gradient(top, rgb(87, 86, 87), rgb(82, 81, 82));
								background: -webkit-linear-gradient(top, darken(@baseColor, 22%), darken(@baseColor, 24%));
								border-top-color: rgb(87, 86, 87);
								border-top-color: darken(@baseColor, 22%);
							}
						}

						&.view-switcher-hidden:not(.active-view) {
							border-left: none;
							width: 0;

							.view-switcher-item-container {
								width: 0;
								min-width: 0;
								padding: 0;
								margin: 0;
								overflow: hidden;
							}
						}

						.view-switcher-item-container {
							display: inline-block;
							position: relative;
							line-height: 18px;
							text-align: center;
							padding: 0;
							white-space: nowrap;

							.view-switcher-item-name {
								color: #616161;								
								white-space: nowrap;
							}

							.transition;

							.jsb-large-font& {
								line-height: 17px;
							}

							.view-switcher-item-notification {
								display: none;
								position: absolute;
								bottom: 5px;
								left: 100%;
								margin-left: 3px;
								height: 6px;
								min-width: 7px;
								padding: 3px 4px;
								border-radius: 10px;
								background: lighten(red, 8%);
								text-align: center;
								line-height: 5px;
								color: #fff;
								border: 1px solid rgba(0, 0, 0, 0.2);
								font-size: 85%;
								text-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);
								box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
								z-index: 2;
								white-space: nowrap;

								.jsb-large-font& {
									bottom: 4px;
								}
							}
						}

						&[data-poppy] {
							.view-switcher-item-notification {
								margin-left: 5px;
							}

							.poppy-menu-target:after {
								// margin-right: -3px;
							}

							&.active-view .poppy-menu-target:after {
								color: #aaa;
							}
						}
					}
				}
			}

			.ui-view {
				background: #fff;

				&.active-view {
					display: block;
				}

				.floated-header {
					position: absolute;
					z-index: 5;
				}
			}

			.ui-view,
			.ui-view:not(.active-view) .ui-view {
				display: none;
			}

			.ui-view-container::-webkit-scrollbar {
				width: 9px;
				height: 9px;
			}

			*[data-poppy] {				
				.poppy-menu-target:after {
					display: inline-block;
					position: relative;
					top: -2px;
					content: ' âŒ„';
					margin-left: 6px;
					padding-left: 0;
					color: #d3d3d3;
					-webkit-transform: scale(2.4, 2);
					text-shadow: 0 0 0 rgba(0, 0, 0, 0.1);
					-webkit-font-smoothing: antialiased;

					.jsb-large-font& {
						top: -3px;
					}
				}

				&.poppy-menu-disabled .poppy-menu-target:after {
					display: none;
				}
			}

			#main-views {
				-webkit-flex: 1 1 auto;
				overflow-y: scroll;
				overflow-x: hidden;
				padding: 2px 0;
				margin-top: 1px;

				.yosemite& {
					margin-bottom: 2px;
				}

				.snapshot-info {
					display: none;
				}
			}
		}

		@import "view.page.less";
		@import "view.resource.less";
		@import "view.setting.less";
		@import "view.rule.less";
	}
}

@import "../shared-after.less";

.shared-after(@empty);
